<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreshMarket - Cognitive Assessment</title>
    <link rel="stylesheet" href="../shared/app-stages.css">
    <link rel="stylesheet" href="app.css">
</head>
<body>
    <main class="app-layout">
        <header class="app-header">
            <div class="badge-inline">üõí Shopping</div>
            <div class="meta">
                <h1>FreshMarket</h1>
                <p>Instruction ‚Üí Task ‚Üí Stats</p>
            </div>
        </header>

        <section id="intro-screen" class="stage active">
            <article class="instruction-card card">
                <div class="instruction-icon" aria-hidden="true">üõí</div>
                <h2 class="instruction-title">The Budget Shop</h2>
                <p class="instruction-desc">Complete the shopping list without exceeding ¬£25.00.</p>
                <div class="task-panel">
                    <strong>Rules</strong>
                    <ul>
                        <li>You have a strict budget of <strong>¬£25.00</strong>.</li>
                        <li>Buy everything on the list, making smart substitutions.</li>
                        <li>Avoid impulse buys that are not on the list.</li>
                    </ul>
                </div>
                <div class="flex-between">
                    <div class="chip-row">
                        <span class="chip">Budgeting</span>
                        <span class="chip">Planning</span>
                        <span class="chip">Problem solving</span>
                    </div>
                    <button class="btn primary" onclick="startGame()">Start Shopping</button>
                </div>
            </article>
        </section>

        <section id="stage-task" class="stage">
            <div class="card main-layout">

                <div class="sidebar-left">
                    <div class="paper-list">
                        <h3>üìù Shopping List</h3>
                        <p class="muted">Target: Family Meal<br>Budget: ¬£25.00</p>

                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Minced Beef (500g)</span>
                        </div>
                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Spaghetti</span>
                        </div>
                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Jar of Tomato Sauce</span>
                        </div>
                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Cheddar Cheese</span>
                        </div>
                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Milk (2 Liters)</span>
                        </div>
                        <div class="list-item" onclick="toggleCheck(this)">
                            <div class="checkbox"></div> <span>Fresh Fruit</span>
                        </div>

                        <p class="muted small-note">
                            Tap boxes to check off items as you go.
                        </p>
                    </div>
                </div>

                <div class="shop-aisle" id="product-grid">
                    </div>

                <div class="sidebar-right">
                    <div class="cart-header">
                        <h3 style="margin:0;">Your Trolley</h3>
                        <div class="budget-display" id="budget-box">
                            <span>Remaining:</span>
                            <span id="budget-val">¬£25.00</span>
                        </div>
                    </div>

                    <div class="cart-items" id="cart-list">
                        <div style="text-align:center; padding:20px; color:#999; font-style:italic;">Trolley is empty</div>
                    </div>

                    <div class="cart-footer">
                        <div style="display:flex; justify-content:space-between; margin-bottom:10px; font-weight:bold;">
                            <span>Total:</span>
                            <span id="total-val">¬£0.00</span>
                        </div>
                        <button class="btn-checkout" onclick="finishShop()">Checkout</button>
                    </div>
                </div>

            </div>
        </section>

        <section id="report-screen" class="stage">
            <article class="summary-card card">
                <h2>Checkout Report</h2>

                <div class="summary-grid">
                    <div class="summary-tile">
                        <div class="label">Budget</div>
                        <div class="value" id="res-budget">Pass</div>
                    </div>
                    <div class="summary-tile">
                        <div class="label">Items Found</div>
                        <div class="value" id="res-items">0/6</div>
                    </div>
                    <div class="summary-tile">
                        <div class="label">Time Taken</div>
                        <div class="value" id="res-time">‚Äî</div>
                    </div>
                </div>

                <table id="res-table">
                    <thead>
                        <tr>
                            <th>Task / Category</th>
                            <th>Result</th>
                            <th>Notes</th>
                        </tr>
                    </thead>
                    <tbody id="res-body"></tbody>
                </table>

                <div class="flex-between">
                    <textarea id="clinician-notes" rows="3" placeholder="Clinician notes..." style="flex:1; margin-right:10px;"></textarea>
                    <button class="btn-checkout" onclick="location.reload()">Try Again</button>
                </div>
            </article>
        </section>
    </main>

    <script src="app.js"></script>
</body>
</html>
